<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Available Products</title>

  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background-color: #121212;
      color: #fff;
      padding: 2rem;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #fff;
    }

    .table-container {
      overflow-x: auto;
      margin: 0 auto;
      max-width: 1000px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #1f1f1f;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }

    thead {
      background-color: #009087;
      color: #ffffff;
    }

    th,
    td {
      padding: 14px 20px;
      text-align: left;
    }

    tbody tr:nth-child(even) {
      background-color: #2a2a2a;
    }

    tbody tr:hover {
      background-color: #333333;
      transition: background-color 0.3s ease;
    }

    th {
      font-size: 16px;
    }

    td {
      font-size: 15px;
      color: #e0e0e0;
    }

    @media (max-width: 768px) {

      th,
      td {
        font-size: 14px;
        padding: 10px 12px;
      }
    }




    /* sidebar styles */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(to right, #e8eced, #a0a8f0);
    }

    .sidebar {
      width: 270px;
      margin: 16px;
      position: fixed;
      background: #151A2D;
      border-radius: 16px;
      height: calc(100vh - 32px);
      transition: 0.4s ease;
      z-index: 1000;
    }

    .sidebar.collapsed {
      width: 85px;
    }

    .sidebar-header {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 25px 20px;
    }

    .sidebar-header .header-logo img {
      width: 50px;
      height: 50px;
      display: block;
      object-fit: contain;
      border-radius: 50%;
      background: #151A2D;

    }

    .sidebar-nav .nav-link {
      color: #fff;
      text-decoration: none;
      display: flex;
      gap: 12px;
      align-items: center;
      white-space: nowrap;
      padding: 12px 15px;
      text-decoration: none;
      transition: 0.4s ease;
      border-radius: 8px;
    }

    .sidebar-nav .nav-link:hover {
      background: #fff;
      color: #151A2D;
    }

    .sidebar-nav .nav-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 0 15px;
      transform: translateY(15px);
      transition: 0.4s ease;
    }

    .sidebar-header .toggler:hover {
      background: #dde4fb;
    }

    .sidebar-header .sidebar-toggler span {
      font-size: 1.75rem;
      transition: 0.4s ease;
    }

    .sidebar.collapsed .sidebar-header .sidebar-toggler span {
      transform: rotate(180deg);
    }

    .sidebar-header .toggler {

      height: 35px;
      width: 35px;
      border: none;
      cursor: pointer;
      color: #151A2D;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      background: #fff;
      transition: 0.4s ease;
    }

    .sidebar-header .sidebar-toggler {
      position: absolute;
      right: 20px;
    }

    .sidebar-header .menu-toggler {
      display: none;
    }

    .sidebar.collapsed .sidebar-header .sidebar-toggler {
      transform: translate(-4px, 65px);
    }

    .sidebar-nav .nav-link .nav-label {
      transition: opacity 0.4s ease;
    }

    .sidebar.collapsed .sidebar-nav .nav-link .nav-label {
      opacity: 0;
      pointer-events: none;
    }

    .sidebar.collapsed .sidebar-nav .primary-nav {
      transform: translateY(65px);
    }

    .sidebar-nav .nav-item {
      position: relative;
    }

    .sidebar-nav .secondary-nav {
      position: absolute;
      bottom: 30px;
      width: 100%;
    }

    .sidebar.collapsed .sidebar-nav .nav-tooltip {
      display: block;
    }

    .sidebar-nav .nav-tooltip {
      position: absolute;
      top: -10px;
      left: calc(100% + 25px);
      opacity: 0;
      display: none;
      pointer-events: none;
      color: #151A2D;
      padding: 6px 12px;
      border-radius: 8px;
      background: #fff;
      white-space: nowrap;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
      transition: 0s;
    }

    C-nav .nav-item:hover .nav-tooltip {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(50%);
      transition: 0.4s ease;
    }

    @media (max-width: 1024px) {
      .sidebar {
        height: 56px;
        overflow-y: hidden;
        margin: 13px;
        scrollbar-width: none;
        width: calc(100% - 28px);
        max-height: calc(100vh - 28px);
      }

      .sidebar.menu-active {
        overflow-y: auto;
      }

      .sidebar-header {
        position: sticky;
        top: 0;
        z-index: 20;
        background: #151A2D;
        padding: 8px 10px;
        border-radius: 10px;
      }

      .sidebar-nav .nav-list {
        padding: 0 10px;
      }

      .sidebar-header .sidebar-toggler {
        display: none;
      }

      .sidebar-header .menu-toggler {
        display: flex;
        height: 30px;
        width: 30px;
      }

      .sidebar-header .menu-toggler span {
        font-size: 1.3rem;
      }

      .sidebar-header .header-logo img {
        width: 40px;
        height: 40px;
      }

      .sidebar-nav .nav-link {
        gap: 10px;
        padding: 10px;
        font-size: 0.94rem;
      }

      .sidebar-nav .nav-link .nav-icon {
        font-size: 1.37rem;
      }

      .sidebar-nav .secondary-nav {
        position: relative;
        bottom: 0;
        margin: 40px 0 30px;
      }

    }









    .CRUD {
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1.5rem;
      flex-wrap: wrap;
    }

    .button2 {
      display: inline-block;
      transition: all 0.2s ease-in;
      position: relative;
      overflow: hidden;
      z-index: 1;
      color: #090909;
      padding: 0.7em 1.7em;
      cursor: pointer;
      font-size: 18px;
      border-radius: 0.5em;
      background: #e8e8e8;
      border: 1px solid #e8e8e8;
      box-shadow: 6px 6px 12px #c5c5c5, -6px -6px 12px #ffffff;
      user-select: none;
    }

    .button2:hover {
      color: #ffffff;
      border: 1px solid #009087;
    }

    .button2:before,
    .button2:after {
      content: "";
      position: absolute;
      border-radius: 50%;
      display: block;
      transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
      z-index: -1;
    }

    .button2:before {
      left: 50%;
      top: 100%;
      transform: translateX(-50%) scaleY(1) scaleX(1.25);
      width: 140%;
      height: 180%;
      background-color: rgba(0, 0, 0, 0.05);
    }

    .button2:after {
      left: 55%;
      top: 180%;
      transform: translateX(-50%) scaleY(1) scaleX(1.45);
      width: 160%;
      height: 190%;
      background-color: #009087;
    }

    .button2:hover:before {
      top: -35%;
      background-color: #009087;
      transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
    }

    .button2:hover:after {
      top: -45%;
      background-color: #009087;
      transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
    }


















    /* Form overlay styles */
    #formOverlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }



    #crudForm {
      background-color: #1f1f1f;
      padding: 2rem;
      border-radius: 10px;
      max-width: 400px;
      width: 90%;
      color: #fff;
      box-shadow: 0 0 10px #009087;
    }

    #crudForm label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }

    #crudForm input[type="text"],
    #crudForm input[type="email"],
    #crudForm input[type="tel"] {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border-radius: 5px;
      border: none;
      font-size: 1rem;
    }

    #crudForm button {
      margin-top: 1.5rem;
      background-color: #009087;
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    #crudForm button:hover {
      background-color: #007563;
    }

    #closeForm {
      background-color: #e74c3c;
      margin-left: 1rem;
    }

    #closeForm:hover {
      background-color: #c0392b;
    }



















    /* search bar */
    /* ...existing code... */
.form {
  --input-text-color: #fff;
  --input-bg-color: #283542;
  --focus-input-bg-color: transparent;
  --text-color: #949faa;
  --active-color: #1b9bee;
  --width-of-input: 200px;
  --inline-padding-of-input: 1.2em;
  --gap: 0.9rem;
}
.form {
  font-size: 0.9rem;
  display: flex;
  gap: 0.5rem;
  align-items: center;
  width: var(--width-of-input);
  position: relative;
  isolation: isolate;
}
.fancy-bg {
  position: absolute;
  width: 100%;
  inset: 0;
  background: var(--input-bg-color);
  border-radius: 30px;
  height: 100%;
  z-index: -1;
  pointer-events: none;
  box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
}
label {
  width: 100%;
  padding: 0.8em;
  height: 40px;
  padding-inline: var(--inline-padding-of-input);
  display: flex;
  align-items: center;
}
.search,.close-btn {
  position: absolute;
}
.search {
  fill: var(--text-color);
  left: var(--inline-padding-of-input);
}
svg {
  width: 17px;
  display: block;
}
.close-btn {
  border: none;
  right: var(--inline-padding-of-input);
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  padding: 0.1em;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--active-color);
  opacity: 0;
  visibility: hidden;
}
.input {
  color: var(--input-text-color);
  width: 100%;
  margin-inline: min(2em,calc(var(--inline-padding-of-input) + var(--gap)));
  background: none;
  border: none;
}
.input:focus {
  outline: none;
}
.input::placeholder {
  color: var(--text-color)
}
.input:focus ~ .fancy-bg {
  border: 1px solid var(--active-color);
  background: var(--focus-input-bg-color);
}
.input:focus ~ .search {
  fill: var(--active-color);
}
.input:valid ~ .close-btn {
  opacity: 1;
  visibility: visible;
}
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-transition: "color 9999s ease-out, background-color 9999s ease-out";
  -webkit-transition-delay: 9999s;
}
  </style>
</head>



<body>
    <aside class="sidebar">
    <header class="sidebar-header">
        <a href="#" class="header-logo">
            <img src="../static/pictures/Logo2.png" alt="Tadco Mart">
        </a>

        <button class="toggler sidebar-toggler" aria-label="Toggle sidebar">
            <span class="material-symbols-outlined">
                chevron_left
            </span>
        </button>
        <button class="toggler menu-toggler" aria-label="Toggle sidebar">
            <span class="material-symbols-outlined">
                menu
            </span>
        </button>
    </header>

    <!-- top primary nav -->
    <nav class="sidebar-nav">
        <ul class="nav-list primary-nav">
            <li class="nav-item">
                <a href="dashboard" class="nav-link" data-page="dashboard.html">
                    <span class="nav-icon material-symbols-outlined">dashboard</span>
                    <span class="nav-label">Dashboard</span>
                </a>
                <span class="nav-tooltip">Dashboard</span>
            </li>
            <li class="nav-item">
                <a href="report" class="nav-link" data-page="Report.html">
                    <span class="nav-icon material-symbols-outlined">Description</span>
                    <span class="nav-label">Report</span>
                </a>
                <span class="nav-tooltip">Report</span>
            </li>
            <li class="nav-item">
                <a href="suppliers" class="nav-link" data-page="Suppliers.html">
                    <span class="nav-icon material-symbols-outlined">Group</span>
                    <span class="nav-label">Suppliers</span>
                </a>
                <span class="nav-tooltip">Suppliers</span>
            </li>
            <li class="nav-item">
                <a href="analytics" class="nav-link" data-page="Analytics.html">
                    <span class="nav-icon material-symbols-outlined">Analytics</span>
                    <span class="nav-label">Analytics</span>
                </a>
                <span class="nav-tooltip">Analytics</span>
            </li>
            <li class="nav-item">
                <a href="notifi" class="nav-link" data-page="Notifi.html">
                    <span class="nav-icon material-symbols-outlined">notifications</span>
                    <span class="nav-label">Notifications</span>
                </a>
                <span class="nav-tooltip">Notifications</span>
            </li>
            <li class="nav-item">
                <a href="products" class="nav-link" data-page="Products.html">
                    <span class="nav-icon material-symbols-outlined">Category</span>
                    <span class="nav-label">Products</span>
                </a>
                <span class="nav-tooltip">Products</span>
            </li>
            <li class="nav-item">
                    <a href="order" class="nav-link" data-page="Order.html">
                        <span class="nav-icon material-symbols-outlined">star</span>
                        <span class="nav-label">Order</span>
                    </a>
                    <span class="nav-tooltip">Order</span>
                </li>
        </ul>

        <!-- secondary bottom nav -->
        <ul class="nav-list secondary-nav">
            <li class="nav-item">
                <a href="profile" class="nav-link" data-page="Profile.html">
                    <span class="nav-icon material-symbols-outlined">account_circle</span>
                    <span class="nav-label">Profile</span>
                </a>
                <span class="nav-tooltip">Profile</span>
            </li>
            <li class="nav-item">
                <a href="/" class="nav-link">
                    <span class="nav-icon material-symbols-outlined">logout</span>
                    <span class="nav-label">Logout</span>
                </a>
                <span class="nav-tooltip">Logout</span>
            </li>
        </ul>
    </nav>
</aside>
  <h1>Available Suppliers</h1>




  <!-- CRUD Buttons -->
  <div class="CRUD">
    <button id="addBtn" class="button2">Add Supplier</button>
    <button id="deleteBtn" class="button2">Delete Supplier</button>
    <button id="updateBtn" class="button2">Update Supplier</button>
  </div>

  <div style="display: flex; justify-content: flex-end; max-width: 1000px; margin: 0 auto 1.5rem auto;">
  <form class="form" id="searchForm">
    <label for="search">
      <input class="input" type="text" required placeholder="Search Supplier ID" id="searchInput" autocomplete="off">
      <div class="fancy-bg"></div>
      <div class="search">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <g>
            <path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path>
          </g>
        </svg>
      </div>
      <button class="close-btn" type="reset">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
        </svg>
      </button>
    </label>
  </form>
</div>

  <!-- Form Overlay -->
  <div id="formOverlay">
    <form id="crudForm">
      <h2 id="formTitle">Add Supplier</h2>

      <label for="supplierId">Supplier ID</label>
      <input type="text" id="supplierId" name="supplierId" placeholder="e.g. SUP003" required />

      <label for="name">Name</label>
      <input type="text" id="name" name="name" required />

      <label for="contactNumber">Contact Number</label>
      <input type="tel" id="contactNumber" name="contactNumber" placeholder="+94 7XXXXXXXX" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" required />

      <label for="address">Address</label>
      <input type="text" id="address" name="address" required />

      <label for="companyName">Company Name</label>
      <input type="text" id="companyName" name="companyName" required />

      <div style="display: flex; justify-content: flex-end;">
        <button type="submit" id="submitBtn">Submit</button>
        <button type="button" id="closeForm">Cancel</button>
      </div>
    </form>
  </div>
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Supplier ID</th>
          <th>Name</th>
          <th>Contact Number</th>
          <th>Email</th>
          <th>Address</th>
          <th>Company Name</th>
        </tr>
      </thead>
      <tbody id="supplierTableBody">
</tbody>

    </table>
  </div>

  <script>
    const sidebar = document.querySelector(".sidebar");
    const sidebarToggler = document.querySelector(".sidebar-toggler");
    const menuToggler = document.querySelector(".menu-toggler");

    const collapsedSidebarHeight = "56px";
    const fullSidebarHeight = "calc(100vh - 32px)";

    //Toggle sidebar collapsed state
    sidebarToggler.addEventListener('click', () => {
      sidebar.classList.toggle("collapsed");
    });

    //Update sidebar height and menu toggle text
    const togglemenu = (isMenuActive) => {
      sidebar.style.height = isMenuActive ? `${sidebar.scrollHeight}px` : collapsedSidebarHeight;
      menuToggler.querySelector("span").innerText = isMenuActive ? "close" : "menu";
    };

    //Toggle menu-active class and adjust height
    menuToggler.addEventListener('click', () => {
      togglemenu(sidebar.classList.toggle("menu-active"));
    });

    window.addEventListener('resize', () => {
      if (window.innerWidth > 1024) {
        sidebar.style.height = fullSidebarHeight;
      } else {
        sidebar.classList.remove("collapsed");
        sidebar.style.height = "auto";
        togglemenu(sidebar.classList.contains("menu-active"));
      }
    });
  </script>



  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC-pLnAIMclS6QgEVRD3mC0Mvx6UtUSSQ0",
      authDomain: "inventory-management-sys-560b1.firebaseapp.com",
      databaseURL: "https://inventory-management-sys-560b1-default-rtdb.firebaseio.com/",
      projectId: "inventory-management-sys-560b1",
      storageBucket: "inventory-management-sys-560b1.appspot.com",
      messagingSenderId: "771187231984",
      appId: "1:771187231984:web:fab69a3ab1af7405490635",
      measurementId: "G-Q5LK8QQKCB"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // DOM Elements
    const formOverlay = document.getElementById("formOverlay");
    const crudForm = document.getElementById("crudForm");
    const supplierTableBody = document.getElementById("supplierTableBody");
    const formTitle = document.getElementById("formTitle");
    const submitBtn = document.getElementById("submitBtn");
    const closeFormBtn = document.getElementById("closeForm");

    const addBtn = document.getElementById("addBtn");
    const updateBtn = document.getElementById("updateBtn");
    const deleteBtn = document.getElementById("deleteBtn");

    // Current CRUD action state
    let currentAction = "add"; // "add", "update", "delete"

    // Show form overlay and setup form fields for different CRUD actions
    function showForm(action) {
      currentAction = action;
      formOverlay.style.display = "flex";

      // Reset form fields
      crudForm.reset();
      supplierId.disabled = false; // enable ID input for add/update

      if (action === "add") {
        formTitle.innerText = "Add Supplier";
        submitBtn.innerText = "Add";
        supplierId.placeholder = "e.g. SUP003";
        enableAllFields(true);
      } else if (action === "update") {
        formTitle.innerText = "Update Supplier";
        submitBtn.innerText = "Update";
        supplierId.placeholder = "Existing Supplier ID";
        enableAllFields(true);
      } else if (action === "delete") {
        formTitle.innerText = "Delete Supplier";
        submitBtn.innerText = "Delete";
        supplierId.placeholder = "Existing Supplier ID";
        // For delete, only Supplier ID is needed
        enableAllFields(false);
        supplierId.disabled = false;
      }
    }

    // Enable or disable form fields except supplierId
    function enableAllFields(enabled) {
      const fields = ["name", "contactNumber", "email", "address", "companyName"];
      fields.forEach(id => {
        document.getElementById(id).disabled = !enabled;
      });
    }

    // Event listeners for buttons
    addBtn.addEventListener("click", () => showForm("add"));
    updateBtn.addEventListener("click", () => showForm("update"));
    deleteBtn.addEventListener("click", () => showForm("delete"));

    // Close form
    closeFormBtn.addEventListener("click", () => {
      formOverlay.style.display = "none";
    });

    // Submit form handler
    crudForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const supplierId = document.getElementById("supplierId").value.trim();
      const name = document.getElementById("name").value.trim();
      const contactNumber = document.getElementById("contactNumber").value.trim();
      const email = document.getElementById("email").value.trim();
      const address = document.getElementById("address").value.trim();
      const companyName = document.getElementById("companyName").value.trim();

      if (!supplierId) {
        alert("Supplier ID is required!");
        return;
      }

      const supplierRef = database.ref("Suppliers/" + supplierId);

      if (currentAction === "add") {
        // Check if supplier ID already exists
        supplierRef.get().then((snapshot) => {
          if (snapshot.exists()) {
            alert("Supplier ID already exists! Use Update instead.");
          } else {
            // Add new supplier
            supplierRef.set({
              name,
              contactNumber,
              email,
              address,
              companyName
            }).then(() => {
              alert("Supplier added successfully!");
              crudForm.reset();
              formOverlay.style.display = "none";
            }).catch((error) => {
              alert("Error adding supplier: " + error.message);
            });
          }
        });
      } else if (currentAction === "update") {
        // Check if supplier ID exists
        supplierRef.get().then((snapshot) => {
          if (!snapshot.exists()) {
            alert("Supplier ID does not exist! Use Add instead.");
          } else {
            // Update supplier
            supplierRef.update({
              name,
              contactNumber,
              email,
              address,
              companyName
            }).then(() => {
              alert("Supplier updated successfully!");
              crudForm.reset();
              formOverlay.style.display = "none";
            }).catch((error) => {
              alert("Error updating supplier: " + error.message);
            });
          }
        });
      } else if (currentAction === "delete") {
        // Delete supplier
        supplierRef.get().then((snapshot) => {
          if (!snapshot.exists()) {
            alert("Supplier ID does not exist.");
          } else {
            supplierRef.remove()
              .then(() => {
                alert("Supplier deleted successfully!");
                crudForm.reset();
                formOverlay.style.display = "none";
              })
              .catch((error) => {
                alert("Error deleting supplier: " + error.message);
              });
          }
        });
      }
    });

    // Store all suppliers for search
let allSuppliersData = {};

// Update displaySuppliers to also store all data
function displaySuppliers(data) {
  supplierTableBody.innerHTML = ""; // Clear table
  if (!data) {
    allSuppliersData = {};
    return;
  }
  allSuppliersData = data; // Store for searching

  Object.entries(data).forEach(([supplierId, supplier]) => {
    const tr = document.createElement("tr");

    tr.innerHTML = `
      <td>${supplierId}</td>
      <td>${supplier.name || ""}</td>
      <td>${supplier.contactNumber || ""}</td>
      <td>${supplier.email || ""}</td>
      <td>${supplier.address || ""}</td>
      <td>${supplier.companyName || ""}</td>
    `;

    supplierTableBody.appendChild(tr);
  });
}

// Search function
function searchSupplierById(supplierId) {
  supplierTableBody.innerHTML = "";
  if (!supplierId) {
    // If search is empty, show all
    displaySuppliers(allSuppliersData);
    return;
  }
  const supplier = allSuppliersData[supplierId];
  if (supplier) {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${supplierId}</td>
      <td>${supplier.name || ""}</td>
      <td>${supplier.contactNumber || ""}</td>
      <td>${supplier.email || ""}</td>
      <td>${supplier.address || ""}</td>
      <td>${supplier.companyName || ""}</td>
    `;
    supplierTableBody.appendChild(tr);
  }
}

// Event listeners for search
const searchForm = document.getElementById("searchForm");
const searchInput = document.getElementById("searchInput");

searchForm.addEventListener("submit", function(e) {
  e.preventDefault();
  const value = searchInput.value.trim();
  searchSupplierById(value);
});

searchForm.addEventListener("reset", function() {
  searchInput.value = "";
  displaySuppliers(allSuppliersData);
});

    // Function to display suppliers in table
    // function displaySuppliers(data) {
    //   supplierTableBody.innerHTML = ""; // Clear table
    //   if (!data) return;

    //   Object.entries(data).forEach(([supplierId, supplier]) => {
    //     const tr = document.createElement("tr");

    //     tr.innerHTML = `
    //       <td>${supplierId}</td>
    //       <td>${supplier.name || ""}</td>
    //       <td>${supplier.contactNumber || ""}</td>
    //       <td>${supplier.email || ""}</td>
    //       <td>${supplier.address || ""}</td>
    //       <td>${supplier.companyName || ""}</td>
    //     `;

    //     supplierTableBody.appendChild(tr);
    //   });
    // }

    // Load supplier data and listen for realtime changes
    function loadSuppliers() {
      const suppliersRef = database.ref("Suppliers");
      suppliersRef.on("value", (snapshot) => {
        const data = snapshot.val();
        displaySuppliers(data);
      });
    }

    // On page load
    window.onload = function () {
      loadSuppliers();
    };
  </script>





</body>

</html>